---
title: "Top 10 African-American History Books"
author: "Clint Barnard-El"
date: "February 27, 2024"
output: 
  html_document:
  theme: cerulean
  toc: true
  toc_float: true
---

*R Markdown file for project that includes:*
1. Web Scraping
2. Data Cleaning and Analysis
3. Reporting

*Web Scraping Notes:*
Source: Google Scholar
Tool: Octoparse
Extraction Date: 2/24/24


Objective: Identify top 10 African-American History books that has been cited the most

### Load libraries and Data

```{r}
library(tidyverse)
library(dtplyr)
library(readxl)
library(tidyselect)
library(janitor)
library(skimr)
library(yaml)
```





### Import Dataset

Load dataset from results of web scraping (Google Scholar/Octoparse) and clean column names
```{r}
df_raw <- read_excel("C:/Users/Clint/Downloads/Data Project/google_scholar_article_listing_raw.xlsx")
clean_df_raw <- clean_names(df_raw)
df_a <- clean_df_raw #rename for simplicity
print(df_a)
```





### Clean and Filter Data


Correct columns formats (character to integer) and values for case sensitive functions (lowercase)
```{r}
df_a[, c(3, 6, 7)] <-lapply(df_a[, c(3, 6, 7)], as.integer)
df_a[, c(1, 2)] <- apply(df_a[, c(1, 2)], 2, tolower)
print(df_a)
```


Verify data to ensure title include specific keywords
```{r}
filter_df <- df_a[grepl("african|negro|black", 
                           tolower(df_a$title)) & grepl("history", tolower(df_a$description)), ] 
print(filter_df)
```


Remove columns outside of project objective, populate empty fields in new column "format"
```{r}
df <- filter_df[ -c(4, 5, 7, 8) ]
df$format <- NA #assign NA to null
print(df)
```


Prepare data for organization; populate format column based on 1 of 3 keywords from title; replace "NA" in cited_for with "0" (avoid summarizing error)
```{r}
df$format [grep("book", df$title)] <- "book"
df$format [grep("pdf", df$title)] <- "pdf"
df$format [is.na(df$format)] <- "article"
df$cited_for [is.na(df$cited_for)] <- 0
print(df)
```


Create new table of top 10 book titles that had the most citations; view table for verification
```{r}
top_books <- df %>%
  filter(grepl("book", title)) %>%   
  arrange(desc(cited_for)) %>%      
  head(10)  
print(top_books)
```





### Print Table


Clean title column to remove superfluous sub-string characters, print table
```{r}
df_clean <- top_books %>%
  mutate(title = substr(title, 11, nchar(title)))
data <- df_clean[1:10, ]
knitr::kable(data,
 caption = "Top 10 African-American History Books")
```


